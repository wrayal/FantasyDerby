<div class="leftHalfPane">
	<b>Preferred draft order selection</b><br>
	Select a team:<br>

	<!--Code for selecting a team and linking to Rinxter/FTS-->
	<select ng-model="squadCtrl.currentSelectionPrime" ng-change="squadCtrl.switchTeamSelect()">
		<option ng-repeat="(key,entry) in competitionCtrl.tournamentData[squadCtrl.tourId].teamList" value="{{key}}">
			{{entry.leagueName}}
		</option>
		<option value="other">Select other...</option>
	</select>
	<br>

	<!--Code for teams not listed as being in this tournament by default-->
	<select ng-model="squadCtrl.currectSelectionExtra" 
			ng-show="squadCtrl.currentSelectionPrime=='other'" 
			ng-change="squadCtrl.switchTeamSelect()">
		<option ng-repeat="(extraKey,extraEntry) in squadCtrl.extraTeams" value="{{extraKey}}">
			{{extraEntry.leagueName}}
		</option>
	</select>
	<br ng-show="squadCtrl.currentSelectionPrime=='other'">

	<b>{{squadCtrl.teams[squadCtrl.currentSelectionTeam].leagueName}}</b>
	<!--And links for either as appropriate-->
	<a href="{{'http://flattrackstats.com/search/'+squadCtrl.teams[squadCtrl.currentSelectionTeam].leagueName}}"
		ng-show="squadCtrl.teams[squadCtrl.currentSelectionTeam].leagueName"
	>
		<img src="images/fts-logo.png" style="height:15px"></img>
	</a>
	<a href="{{'https://stats-repo.wftda.com/index.jsp?q='+squadCtrl.teams[squadCtrl.currentSelectionTeam].leagueName}}"
		ng-show="squadCtrl.teams[squadCtrl.currentSelectionTeam].leagueName"
	>
		<img src="images/RinxterLett.png" style="height:15px"></img>
	</a><br>
	<span ng-show="squadCtrl.teams[squadCtrl.currentSelectionTeam].leagueName">
		Please click and drag a player to the right:
	</span><br>

	<!--And the table of players-->
	<table class="dndTable">
		<tr ng-repeat="(key,player) in squadCtrl.teams[squadCtrl.currentSelectionTeam].teamPlayers">

			<td x-lvl-draggable="true"
				whatSource="teamData"
				whatKey="{{key}}"
				ng-hide="squadCtrl.draftedPlayers[player.id]"
			>
				{{player.name}} - #{{player.number}} 
			</td>
			<td
				ng-hide="squadCtrl.draftedPlayers[player.id]">
				<a href="{{'https://stats-repo.wftda.com/index.jsp?q='+player.name}}"><img src="images/RinxterLett.png" style="height:15px"></img></a>
			</td>

			<td x-lvl-draggable="true"
				whatSource="teamData"
				whatKey="{{key}}"
				ng-show="squadCtrl.draftedPlayers[player.id] && squadCtrl.draftedPlayers[player.id].draftedBy==competitionCtrl.uid"
				style="background:green;color:white"
			>
				{{player.name}} - #{{player.number}}
			</td>
			<td
				ng-show="squadCtrl.draftedPlayers[player.id] && squadCtrl.draftedPlayers[player.id].draftedBy==competitionCtrl.uid"
				style="background:green;color:white"
				>
				<a href="{{'https://stats-repo.wftda.com/index.jsp?q='+player.name}}"><img src="images/RinxterLett.png" style="height:15px"></img></a>
			</td>

			<td x-lvl-draggable="true"
				whatSource="teamData"
				whatKey="{{key}}"
				ng-show="squadCtrl.draftedPlayers[player.id] && squadCtrl.draftedPlayers[player.id].draftedBy!=competitionCtrl.uid"
				style="background:red;color:white"
			>
				{{player.name}} - #{{player.number}}
			</td>
			<td
				ng-show="squadCtrl.draftedPlayers[player.id] && squadCtrl.draftedPlayers[player.id].draftedBy!=competitionCtrl.uid"
				style="background:red;color:white"
				>
				<a href="{{'https://stats-repo.wftda.com/index.jsp?q='+player.name}}"><img src="images/RinxterLett.png" style="height:15px"></img></a>
			</td>

		</tr>
	</table>
</div>

<div class="rightHalfPane">
	<b>Current selection</b><br>
	<!--This is the functionality to allow copying from existing fantasy leagues-->
	<div ng-show="!squadCtrl.currentSelection.length">
		Copy from existing league:
		<select ng-model="squadCtrl.sourceLeague">
			<option ng-repeat="(leagueKey,leagueVal) in competitionCtrl.myLeagues" ng-if="leagueKey!=fantasyLeagueCtrl.lid" value="{{leagueKey}}">
				{{leagueVal}}
			</option>
		</select>
		<input type="button" value="copy" ng-click="squadCtrl.copyFromExisting()">
	</div>

	<!--And this is the dropping interface and its controls:-->
	<input type="button" value="&#10226;" ng-click="squadCtrl.undo()" ng-disabled="!squadCtrl.pastSelections.length">&nbsp;
	<input type="button" value="Save selection" ng-click="squadCtrl.saveSelection()">
	<span ng-hide="squadCtrl.checkSaved()" style="color:red">Selection unsaved</span>
	<br>
	<font
		ng-style="{'color':(squadCtrl.selectedJammers<squadCtrl.maxJammers?'red':'green')}"
	>Jammers selected: {{squadCtrl.selectedJammers}} of {{squadCtrl.maxJammers}}</font>
		<font style="font-size:x-small">(recommended)</font><br>
	<font 
		ng-style="{'color':(squadCtrl.selectedDTs<squadCtrl.maxDTs?'red':'green')}"
	>Double threats selected: {{squadCtrl.selectedDTs}} of {{squadCtrl.maxDTs}}</font><br>
	<font 
		ng-style="{'color':(squadCtrl.selectedBlockers<squadCtrl.maxBlockers?'red':'green')}"
	>Blockers selected: {{squadCtrl.selectedBlockers}} of {{squadCtrl.maxBlockers}}</font>
	<table  class="dndTable">
		<tr ng-repeat="(key,value) in squadCtrl.currentSelection"
			x-lvl-draggable='true'
			x-lvl-drop-target="true"
			x-on-drop="squadCtrl.dropped(dragEl, dropEl)"
			whatSource="selectionData"
			whatKey="{{key}}"
		>
			<td ng-hide="squadCtrl.draftedPlayers[value.id]">
				{{key+1}}
			</td>
			<td ng-hide="squadCtrl.draftedPlayers[value.id]">
				{{value.name}} #{{value.number}}
			</td>

			<td ng-show="squadCtrl.draftedPlayers[value.id] && squadCtrl.draftedPlayers[value.id].draftedBy==competitionCtrl.uid"
				style="background:green;color:white">
				{{key+1}}
			</td>
			<td ng-show="squadCtrl.draftedPlayers[value.id] && squadCtrl.draftedPlayers[value.id].draftedBy==competitionCtrl.uid"
				style="background:green;color:white">
				{{value.name}} #{{value.number}}
			</td>

			<td ng-show="squadCtrl.draftedPlayers[value.id] && squadCtrl.draftedPlayers[value.id].draftedBy!=competitionCtrl.uid"
				style="background:red;color:white">
				{{key+1}}
			</td>
			<td ng-show="squadCtrl.draftedPlayers[value.id] && squadCtrl.draftedPlayers[value.id].draftedBy!=competitionCtrl.uid"
				style="background:red;color:white">
				{{value.name}} #{{value.number}}
			</td>

			<td>
				<select ng-model="squadCtrl.currentSelection[key].position" class="dndrop">
					<option value="jammer">
						Jammer
					</option>
					<option value="doubleThreat">
						Double Threat
					</option>
					<option value="blocker">
						Blocker
					</option>
				</select>
			</td>
			<td>
				<a href="" ng-click="squadCtrl.deleteSelectionEntry(key)"><img src="images/delete.png" style="width:20px"></img></a>
			</td>
		</tr>
		<tr x-lvl-draggable='true'
			x-lvl-drop-target="true"
			x-on-drop="squadCtrl.dropped(dragEl, dropEl)"
			whatSource="selectionData"
			whatKey="-1"
			ng-hide="squadCtrl.currentSelection.length"
		>
			<td >
				Drag and drop players here...
			</td>
		</tr>
	</table>
</div>